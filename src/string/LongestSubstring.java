package string;

/**
 * @author chengj
 * @Description 395.è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ä¸­ç­‰
 * @Date 2022/5/10
 */
//ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ æ‰¾å‡º s ä¸­çš„æœ€é•¿å­ä¸²ï¼Œ è¦æ±‚è¯¥å­ä¸²ä¸­çš„æ¯ä¸€å­—ç¬¦å‡ºç°æ¬¡æ•°éƒ½ä¸å°‘äº k ã€‚è¿”å›è¿™ä¸€å­ä¸²çš„é•¿åº¦ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šs = "aaabb", k = 3
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šæœ€é•¿å­ä¸²ä¸º "aaa" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 3 æ¬¡ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šs = "ababbc", k = 2
//è¾“å‡ºï¼š5
//è§£é‡Šï¼šæœ€é•¿å­ä¸²ä¸º "ababb" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 2 æ¬¡ï¼Œ 'b' é‡å¤äº† 3 æ¬¡ã€‚
//
//
//
// æç¤ºï¼š
//
//
// 1 <= s.length <= 10â´
// s ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
// 1 <= k <= 10âµ
//
// Related Topics å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² åˆ†æ²» æ»‘åŠ¨çª—å£ ğŸ‘ 682 ğŸ‘ 0
public class LongestSubstring {

    public static void main(String[] args) {
        LongestSubstring ls = new LongestSubstring();
        System.out.println(ls.longestSubstring("ababacb",3));
    }
    public int longestSubstring(String s, int k) {
        // ç»“æœ
        int ans = 0;

        int len = s.length();
        char[] chars = s.toCharArray();
        // æˆ‘ä»¬å¯ä»¥æšä¸¾æœ€å¤§é•¿åº¦æ‰€åŒ…å«çš„å­—ç¬¦ç±»å‹æ•°é‡ï¼Œ
        // ç­”æ¡ˆå¿…ç„¶æ˜¯ [1, 26]ï¼Œå³æœ€å°‘åŒ…å« 1 ä¸ªå­—æ¯ï¼Œæœ€å¤šåŒ…å« 26 ä¸ªå­—æ¯ã€‚
        for(int p = 1; p <=26;p++){
            int[] count = new int[26];
            // æ»‘åŠ¨çª—å£é‡Œåˆ°è¾¾kæ¬¡çš„å­—æ¯ç§ç±»æ•°
            int sum = 0;
            // æ»‘åŠ¨çª—å£é‡Œå­—æ¯çš„ç§ç±»æ•°
            int tot = 0;
            // iæ˜¯æœ‰è¾¹ç•Œ, jæ˜¯å·¦è¾¹ç•Œ
            for (int i = 0,j =0;i < len;i++){
                // ä¸´æ—¶å˜é‡
                int ct = chars[i] - 'a';
                count[ct]++;
                // ç¬¬ä¸€æ¬¡å‡ºç° ç§ç±»æ•°åŠ 1
                if (count[ct] == 1){
                    tot++;
                }
                // å­—æ¯è¾¾åˆ°kæ¬¡
                if (count[ct] == k){
                    sum++;
                }
                // å½“åŒºé—´æ‰€åŒ…å«çš„å­—ç¬¦ç§ç±»æ•°é‡ tot è¶…è¿‡äº†å½“å‰é™å®šçš„æ•°é‡ pï¼Œ
                // é‚£ä¹ˆæˆ‘ä»¬è¦åˆ é™¤æ‰ä¸€äº›å­—æ¯ï¼Œå³ã€Œå·¦æŒ‡é’ˆã€å³ç§»
                while (tot > p){
                    int t = chars[j] - 'a';
                    j++;
                    count[t]--;
                    if (count[t] == 0){
                        tot--;
                    }
                    if (count[t] == k -1) {
                        sum--;
                    }
                }
                if (tot == sum){
                    // æ´»åŠ¨çª—å£çš„é•¿åº¦
                    ans = Math.max(ans,i-j+1);
                }
            }
        }
        return ans;
    }

}
