package binarysearch;

/**
 * @author chengj
 * @Description 1539.ç¬¬ K ä¸ªç¼ºå¤±çš„æ­£æ•´æ•° ç®€å•
 * @Date 2022/6/7
 */
//ç»™ä½ ä¸€ä¸ª ä¸¥æ ¼å‡åºæ’åˆ— çš„æ­£æ•´æ•°æ•°ç»„ arr å’Œä¸€ä¸ªæ•´æ•° k ã€‚
//
// è¯·ä½ æ‰¾åˆ°è¿™ä¸ªæ•°ç»„é‡Œç¬¬ k ä¸ªç¼ºå¤±çš„æ­£æ•´æ•°ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šarr = [2,3,4,7,11], k = 5
//è¾“å‡ºï¼š9
//è§£é‡Šï¼šç¼ºå¤±çš„æ­£æ•´æ•°åŒ…æ‹¬ [1,5,6,8,9,10,12,13,...] ã€‚ç¬¬ 5 ä¸ªç¼ºå¤±çš„æ­£æ•´æ•°ä¸º 9 ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šarr = [1,2,3,4], k = 2
//è¾“å‡ºï¼š6
//è§£é‡Šï¼šç¼ºå¤±çš„æ­£æ•´æ•°åŒ…æ‹¬ [5,6,7,...] ã€‚ç¬¬ 2 ä¸ªç¼ºå¤±çš„æ­£æ•´æ•°ä¸º 6 ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= arr.length <= 1000
// 1 <= arr[i] <= 1000
// 1 <= k <= 1000
// å¯¹äºæ‰€æœ‰ 1 <= i < j <= arr.length çš„ i å’Œ j æ»¡è¶³ arr[i] < arr[j]
//
//
//
//
// è¿›é˜¶ï¼š
//
// ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ
// Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ ğŸ‘ 114 ğŸ‘ 0
public class FindKthPositive {

    public int findKthPositive(int[] arr, int k) {
        // å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªæ•°ç¼ºå¤±çš„æ•°é‡å¤§äºç­‰äºk
        // åˆ™è¿™kä¸ªæ•°éƒ½åœ¨å‰é¢
        if (missingCount(arr,0) >= k){
            return k;
        }
        int len = arr.length;
        int l = -1;
        int r = len;
        // å·¦è¾¹è“è‰²åŒºåŸŸä¸ºæ•°ç»„ä¸­ç¼ºå¤±å…ƒç´ ä¸ªæ•°å°äºkçš„åŒºé—´ï¼Œ
        // å³è¾¹çº¢è‰²åŒºåŸŸä¸ºæ•°ç»„ä¸­ç¼ºå¤±å…ƒç´ ä¸ªæ•°å¤§äºæˆ–ç­‰äºkçš„åŒºé—´
        while (l + 1 != r){
            int mid = l + (r - l)/2;
            if (missingCount(arr,mid) < k){
                l = mid;
            }else {
                r = mid;
            }
        }
        // è¿™é‡Œl æ˜¯æœ€åä¸€ä¸ªç¼ºå¤±å…ƒç´ ä¸ªæ•°å°äºkçš„
        // arr[i] - i - 1è¡¨ç¤ºarr[i]ä½ç½®ç¼ºå°‘çš„å…ƒç´ ä¸ªæ•°ï¼Œ
        // k - ç¼ºå¤±ä¸ªæ•° è¡¨ç¤ºä»arr[l]å¼€å§‹è¿˜ç¼ºå°‘å‡ ä¸ªå…ƒç´ ï¼Œ
        // å†åŠ ä¸Šarr[l]ï¼Œå°±æ˜¯ç¬¬kä¸ªç¼ºå¤±çš„å…ƒç´ 
        return k - missingCount(arr,l) + arr[l];
    }

    // index ä¸‹æ ‡ ç¼ºå¤±çš„æ­£æ•´æ•°æ•°é‡
    private int missingCount(int[] arr,int index){
        return arr[index] - index -1;
    }
}
